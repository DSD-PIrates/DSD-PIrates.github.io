

## Case: 服务端请求校准传感器

| Author | Version | Statue    | Data       |
| ------ | ------- | --------- | ---------- |
| Bob    | 1       | Unaudited | 2023-03-19 |

### Brief Introduction

传感器正常运行依赖于对地磁场方向的确定，服务端在读取数据前应对传感器进行校准。服务端向嵌入式系统发送校准指令，嵌入式系统收到校准指令时对系统内的所有传感器进行校准。

### Actors

- 服务端

### Pre-Conditions

- 服务端在嵌入式系统的白名单中
- 网络通畅，服务端能够与嵌入式系统建立网络连接

### Basic Flow

1. 嵌入式系统收到校准指令
2. 嵌入式系统进行校准
2. 嵌入式系统反馈校准结果信息

### Exception Flows

- 1a - 服务端频繁发送校准指令，嵌入式系统拒绝校准

- 3a - 网络故障导致校准结果信息无法反馈

### Post Conditions

对于 Basic Flow，服务端能够获取到传感器的校准结果信息（校准成功/校准失败）。对于 Exception Flow 1a， 服务端能够得到来自传感器的校准信息（校准过于频繁）。对于 Exception Flow 3a，服务端无法获取到反馈，嵌入式系统生成出错日志。

### Supplemental Requirements

由于校准操作较为耗时，嵌入式系统在每相邻十秒内至多进行一次校准。

### Revision History

| Version | Date       | Author   | Description      | Status    |
| ------- | ---------- | -------- | ---------------- | --------- |
| 1       | 2023-03-19 | Somebody | Original Version | Unaudited |

