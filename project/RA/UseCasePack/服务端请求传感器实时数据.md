

## Case: 服务端请求传感器实时数据

| Author | Version | Statue    | Data       |
| ------ | ------- | --------- | ---------- |
| Bob    | 1       | Unaudited | 2023-03-19 |

### Brief Introduction

当服务端想要使用实时的传感器数据时，将向本系统（即嵌入式系统）发起请求。本系统将目前各个已经连接到系统的“传感器的最新数据”回传给服务端。

### Actors

- 服务端

### Pre-Conditions

- 网络通畅，服务端可以和嵌入式系统进行通信

### Basic Flow

1. 嵌入式系统检查传感器连接情况
2. 嵌入式系统将已经连接到系统的传感器数据反馈给服务端

### Exception Flows

- 2a - 在嵌入式系统反馈数据时网络断开，生成错误日志
- 2b - 服务端请求过于频繁，嵌入式系统拒绝响应，反馈错误信息

### Post Conditions

对于 Basic Flow，服务端能够获取到本嵌入式系统中“在线”的传感器设备的数据(欧拉角，XYZ三个方向的加速度与XYZ三个方向的角速度)。对于 Exception Flow 2a，服务端获取不到数据。对于  Exception Flow 2b 服务端能够获取到报错信息。

### Supplemental Requirements

“传感器的最新数据”是指传感器与嵌入式系统最后一次交互时所携带的数据，如果传感器在三秒内没有和嵌入式系统进行交互，我们判定传感器已离线。服务端和嵌入式系统之间的通信可能有几百毫秒的延迟。

### Revision History

| Version | Date       | Author   | Description      | Status    |
| ------- | ---------- | -------- | ---------------- | --------- |
| 1       | 2023-03-19 | Somebody | Original Version | Unaudited |

